///////////////////////////////////////////////////////////////////////////////////////
// Beeper

#include <avr/io.h>
#include "os_beep.h"

///////////////////////////////////////////////////////////////////////////////////////
void BEEP_Init(void)
{
	PORTB &= ~(1<<PB3);
	DDRB |= (1<<PB3);

	OCR1C = OCR1C_CONFIG;
	OCR1B = 0x00;

	TCCR1A = (1<<COM1B1) | (1<<FOC1B) | (1<<PWM1B);
	TCCR1B = (1<<CTC1) | (1<<PSR1) | (1<<CS12) | (1<<CS10);
}


///////////////////////////////////////////////////////////////////////////////////////
void BEEP_Start(void)
{
	OCR1C = OCR1C_CONFIG;
	OCR1B = ((OCR1C_CONFIG>>2) + 1);
}

///////////////////////////////////////////////////////////////////////////////////////
void BEEP_Stop(void)
{
	OCR1C = OCR1C_CONFIG;
	OCR1B = 0x00;
}
